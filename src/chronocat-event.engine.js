"use strict";var U=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var Q=Object.getOwnPropertyNames;var X=Object.prototype.hasOwnProperty;var Y=(e,i)=>{for(var n in i)U(e,n,{get:i[n],enumerable:!0})},Z=(e,i,n,t)=>{if(i&&typeof i=="object"||typeof i=="function")for(let r of Q(i))!X.call(e,r)&&r!==n&&U(e,r,{get:()=>i[r],enumerable:!(t=H(i,r))||t.enumerable});return e};var ee=e=>Z(U({},"__esModule",{value:!0}),e);var pe={};Y(pe,{apply:()=>ue,name:()=>z,version:()=>ce});module.exports=ee(pe);var f=require("electron"),V=e=>{let i=async o=>{if(!e.filter){e.handler(o);return}await e.filter(o)&&e.handler(o)},n=Symbol(),t=0,r=f.ipcMain.emit.bind(f.ipcMain);f.ipcMain.emit=function(o,s,...d){let u=s.sender;if(!u[n]){u[n]=!0;let I=u.send.bind(u);u.send=function(g,...y){I.call(this,g,...y);let P=e.getId?.(y);i(P?{type:"wrapped-response",channel:g,method:e.getMethod?.(y),args:y,id:P}:{type:"event",channel:g,method:e.getMethod?.(y),args:y})}}r.call(this,o,s,...d);let h=e.getId?.(d);return i(h?{type:"wrapped-request",channel:o,method:e.getMethod?.(d),args:d,id:h}:{type:"request",channel:o,method:e.getMethod?.(d),args:d}),!1};let a=f.ipcMain.handle.bind(f.ipcMain);return f.ipcMain.handle=function(o,s){let d=async(u,...h)=>{let I=`IPCMAN_HANDLE_${t++}`;i({type:"handle-request",channel:o,method:e.getMethod?.(h),args:h,id:I});let g=await Promise.resolve(s(u,...h));return i({type:"handle-response",channel:o,method:e.getMethod?.(h),args:[g],id:I}),g};a.call(this,o,d)},{emit:r,senderExcludeSymbol:n}};var p;(function(e){e[e.Private=1]="Private",e[e.Group=2]="Group",e[e.Guild=4]="Guild",e[e.MsgBox=7]="MsgBox"})(p||(p={}));var c;(function(e){e[e.Value1=1]="Value1",e[e.Normal=2]="Normal",e[e.Value3=3]="Value3",e[e.System=5]="System",e[e.Ptt=6]="Ptt",e[e.Video=7]="Video",e[e.Value8=8]="Value8",e[e.WithRecords=9]="WithRecords",e[e.Wallet=10]="Wallet",e[e.Ark=11]="Ark",e[e.Vaule17=17]="Vaule17"})(c||(c={}));var l;(function(e){e[e.Normal=0]="Normal",e[e.System=3]="System"})(l||(l={}));var m;(function(e){e[e.Normal1=1]="Normal1",e[e.Normal2=2]="Normal2",e[e.Super=3]="Super",e[e.MarketEmoticon=4]="MarketEmoticon",e[e.PCPoke=5]="PCPoke"})(m||(m={}));var A;(function(e){e[e.Liulian=9]="Liulian",e[e.LveLveLve=10]="LveLveLve",e[e.Pingdiguo=11]="Pingdiguo",e[e.Chaopiao=12]="Chaopiao"})(A||(A={}));var E;(function(e){e[e.None=0]="None",e[e.All=1]="All",e[e.Normal=2]="Normal"})(E||(E={}));var B;(function(e){e[e.Value0=0]="Value0",e[e.Value1=1]="Value1"})(B||(B={}));var D;(function(e){e[e.Value0=0]="Value0",e[e.Value1=1]="Value1",e[e.Value2=2]="Value2"})(D||(D={}));var x;(function(e){e[e.Normal=1]="Normal",e[e.MsgBox=2]="MsgBox",e[e.Value14=14]="Value14"})(x||(x={}));var S={},$=[],O=[],G=[],_=[],b=[],T={};var C=require("node:buffer");var j=e=>({chatType:e.chatType,msgType:e.msgType,subMsgType:{text:!!(e.subMsgType&1),pic:!!(e.subMsgType&2),face:!!(e.subMsgType&16),link:!!(e.subMsgType&128),multiForward:!!(e.subMsgType&8),reply:e.msgType===c.WithRecords&&!!(e.subMsgType&32),marketFace:e.msgType==c.Vaule17&&!!(e.subMsgType&8),file:e.msgType===c.Value3&&!!(e.subMsgType&512)},sendType:e.sendType});var v=(e,i)=>n=>te(e,i,n),te=async(e,i,n)=>{let t=e.chronocat.l,r=await ne(e,i,n);if(!r)return;let a=[];for(let o of r){if(!o.message?.id&&!o.user?.id){t.warn("satori: parser: \u4E22\u5F03\u4E86\u4E00\u6761\u6D88\u606F",{code:2127});continue}else o.message?.id?o.user?.id?!o.user?.name&&!o.member?.nick&&t.warn(`satori: parser: \u6D88\u606F ${o.message.id} \u4E0D\u5E26\u6709 userName\uFF0C\u8BF7\u6CE8\u610F\u3002`,{code:2130}):t.warn(`satori: parser: \u6D88\u606F ${o.message.id} \u4E0D\u5E26\u6709 userId\uFF0C\u8BF7\u6CE8\u610F\u3002`,{code:2129}):t.warn(`satori: parser: \u6765\u81EA ${o.user?.name} (${o.user?.id}) \u7684\u6D88\u606F\u4E0D\u5E26\u6709 messageId\uFF0C\u8BF7\u6CE8\u610F\u3002`,{code:2128});a.push(o)}return a},ne=async(e,i,n)=>{let t={id:void 0,type:void 0,platform:void 0,self_id:void 0,timestamp:Number(n.msgTime)*1e3};t.user={id:n.senderUin,name:n.sendNickName||void 0,avatar:`http://thirdqq.qlogo.cn/headimg_dl?dst_uin=${n.senderUin}&spec=640`};let r=j(n);switch(t.channel={},r.chatType){case p.Private:t.channel.type=1,t.channel.id=`private:${n.peerUin}`,t.channel.name=n.peerName;break;case p.Group:t.guild={},t.member={},n.sendMemberName&&(t.member.nick=n.sendMemberName),t.channel.type=0,t.channel.id=t.guild.id=n.peerUid,t.channel.name=t.guild.name=T[n.peerUid].groupName,t.guild.avatar=`https://p.qlogo.cn/gh/${n.peerUid}/${n.peerUid}/640`;break}if(!(r.msgType===c.Ark&&n.subMsgType===0&&r.sendType===l.Normal)){if(r.msgType===c.Normal||r.msgType===c.Value3||r.msgType===c.Ptt||r.msgType===c.Video||r.msgType===c.WithRecords||r.msgType===c.Vaule17)return k(e,i,t,n).then(a=>[a[0],...a[1]]);if(r.msgType===c.System&&n.subMsgType===8&&r.sendType===l.System&&n.elements[0].elementType===8&&n.elements[0].grayTipElement.subElementType===4&&n.elements[0].grayTipElement.groupElement.type===1)return await re(e,i,t,n);if(r.msgType===c.System&&n.subMsgType===8&&r.sendType===l.System&&n.elements[0].elementType===8&&n.elements[0].grayTipElement.subElementType===4&&n.elements[0].grayTipElement.groupElement.type===8)return await oe(e,i,t,n);if(r.msgType===c.System&&n.subMsgType===8&&r.sendType===l.System&&n.elements[0].elementType===8&&n.elements[0].grayTipElement.subElementType===4&&n.elements[0].grayTipElement.groupElement.type===5)return;if(r.msgType===c.System&&n.subMsgType===12&&r.sendType===l.System&&n.elements[0].elementType===8&&n.elements[0].grayTipElement.subElementType===12&&n.elements[0].grayTipElement.xmlElement.busiType==="1"&&n.elements[0].grayTipElement.xmlElement.busiId==="10145")return await ae(e,i,t,n);if(r.msgType===c.System&&n.subMsgType===17&&r.sendType===l.System)return;if(r.msgType===c.System&&n.subMsgType===12&&r.sendType===l.System&&n.elements[0].elementType===8&&n.elements[0].grayTipElement.subElementType===17&&n.elements[0].grayTipElement.jsonGrayTipElement.busiId==="1061")return await se(e,i,t,n)}};async function k(e,i,n,t){let[r,a]=await J(e,i,n,t);return n.type="message-created",n.message={id:t.msgId,content:r.join("")},[n,a]}async function re(e,i,n,t){let[r,a]=await k(e,i,n,t);return r.type="guild-member-added",t.elements[0].grayTipElement.groupElement.adminUin&&(r.operator={id:t.elements[0].grayTipElement.groupElement.adminUin,name:void 0}),r.user={id:t.elements[0].grayTipElement.groupElement.memberUin,name:t.elements[0].grayTipElement.groupElement.memberNick,avatar:`http://thirdqq.qlogo.cn/headimg_dl?dst_uin=${t.elements[0].grayTipElement.groupElement.memberUin}&spec=640`},r.member||(r.member={}),[r,...a]}async function oe(e,i,n,t){let[r,a]=await k(e,i,n,t);return Number(t.elements[0].grayTipElement.groupElement.shutUp.duration)?r.type="unsafe-guild-mute":r.type="unsafe-guild-unmute",r.operator={id:t.elements[0].grayTipElement.groupElement.shutUp.admin.uin,name:void 0},r.user={id:t.elements[0].grayTipElement.groupElement.shutUp.member.uin,name:t.elements[0].grayTipElement.groupElement.shutUp.member.name,avatar:`http://thirdqq.qlogo.cn/headimg_dl?dst_uin=${t.elements[0].grayTipElement.groupElement.shutUp.member.uin}&spec=640`},r.member&&delete r.member,[r,...a]}var ie=/jp="(\d+)".*jp="(\d+)"/gim;async function ae(e,i,n,t){let[r,a]=await k(e,i,n,t);r.type="guild-member-added";let o=ie.exec(t.elements[0].grayTipElement.xmlElement.content);if(!Array.isArray(o)||o.length<3)return;let[s,d,u]=o;return r.operator={id:d,name:void 0},r.user={id:u,name:void 0,avatar:`http://thirdqq.qlogo.cn/headimg_dl?dst_uin=${u}&spec=640`},r.member||(r.member={}),[r,...a]}async function se(e,i,n,t){let r=JSON.parse(t.elements[0].grayTipElement.jsonGrayTipElement.jsonStr),[a,o]=r.items.filter(s=>s.type=="qq");return n.type="message-created",n.message={id:t.msgId,content:`<${e.chronocat.platform}:poke user-id="${await e.chronocat.uix.getUin2(o.uid,n.guild?.id)}" operator-id="${await e.chronocat.uix.getUin2(a.uid,n.guild?.id)}"/>`},[n]}async function J(e,i,n,t){let r=e.chronocat.l,a=[],o=[];for(let s of t.elements)switch(s.elementType){case 1:{switch(s.textElement.atType){case E.None:{a.push(e.chronocat.h.text(s.textElement.content.replaceAll(`\r
`,`
`).replaceAll("\r",`
`)));break}case E.Normal:{e.chronocat.uix.add(s.textElement.atNtUid,s.textElement.atUid);let d=s.textElement.atUid;d==="0"&&(d=void 0),d||=await e.chronocat.uix.getUin2(s.textElement.atNtUid,n.guild?.id);let u=s.textElement.content.slice(1);if(!d){r.warn(`satori: parser: at \u76EE\u6807 ${u} \u4E0D\u5E26\u6709 id\uFF0C\u5C06\u8DF3\u8FC7\u8BE5\u5143\u7D20\u3002`,{code:2131});break}a.push(e.chronocat.h("at",{id:d,name:u}));break}}break}case 2:{a.push(e.chronocat.h("img",{src:`${i.self_url}/v1/assets/${C.Buffer.from(JSON.stringify({type:"mediav1",msgId:t.msgId,chatType:t.chatType,peerUid:t.peerUid,elementId:s.elementId,thumbSize:s.picElement.thumbFileSize})).toString("base64url")}`}));break}case 3:{a.push(e.chronocat.h("file",{src:`${i.self_url}/v1/assets/${C.Buffer.from(JSON.stringify({type:"mediav1",msgId:t.msgId,chatType:t.chatType,peerUid:t.peerUid,elementId:s.elementId,thumbSize:s.fileElement.thumbFileSize})).toString("base64url")}`}));break}case 4:{a.push(e.chronocat.h("audio",{src:`${i.self_url}/v1/assets/${C.Buffer.from(JSON.stringify({type:"mediav1",msgId:t.msgId,chatType:t.chatType,peerUid:t.peerUid,elementId:s.elementId,thumbSize:0})).toString("base64url")}`}));break}case 5:{a.push(e.chronocat.h("video",{src:`${i.self_url}/v1/assets/${C.Buffer.from(JSON.stringify({type:"mediav1",msgId:t.msgId,chatType:t.chatType,peerUid:t.peerUid,elementId:s.elementId,thumbSize:s.videoElement.thumbSize})).toString("base64url")}`}));break}case 6:{switch(s.faceElement.faceType){case m.PCPoke:{a.push(e.chronocat.h(`${e.chronocat.platform}:pcpoke`,{id:s.faceElement.pokeType}));break}case m.Normal1:case m.Normal2:case m.Super:{a.push(e.chronocat.h(`${e.chronocat.platform}:face`,{id:s.faceElement.faceIndex,name:`[${(await e.chronocat.api["chronocat.internal.qface.get"](`${s.faceElement.faceIndex}`)).QDes.slice(1)}]`,platform:e.chronocat.platform,"unsafe-super":s.faceElement.faceType===m.Super?!0:void 0,"unsafe-result-id":s.faceElement.resultId,"unsafe-chain-count":s.faceElement.chainCount}));break}case m.MarketEmoticon:{a.push(e.chronocat.h(`${e.chronocat.platform}:face`,{id:s.faceElement.faceIndex,platform:e.chronocat.platform,"unsafe-market-emoticon":!0}));break}}break}case 7:{let d=t.records.find(u=>u.msgId===s.replyElement.sourceMsgIdInRecords);a.push(e.chronocat.h("quote",{"chronocat:seq":s.replyElement.replayMsgSeq},[await de(e,d),...(await J(e,i,n,d))[0]]));break}case 11:{a.push(e.chronocat.h(`${e.chronocat.platform}:marketface`,{tabId:s.marketFaceElement.emojiPackageId,faceId:s.marketFaceElement.emojiId,key:s.marketFaceElement.key},[e.chronocat.h("img",{src:`${i.self_url}/v1/assets/${C.Buffer.from(JSON.stringify({type:"mfacev1",tabId:s.marketFaceElement.emojiPackageId,faceId:s.marketFaceElement.emojiId,key:s.marketFaceElement.key,name:s.marketFaceElement.faceName,filePath:s.marketFaceElement.staticFacePath})).toString("base64url")}`})]));break}case 27:{a.push(e.chronocat.h(`${e.chronocat.platform}:facebubble`,{id:s.faceBubbleElement.faceType,count:s.faceBubbleElement.faceCount,name:s.faceBubbleElement.faceSummary,content:s.faceBubbleElement.content}));break}default:break}return[a,o]}async function de(e,i){return e.chronocat.h("author",{id:i.senderUin,name:i.sendMemberName||i.sendNickName,avatar:`http://thirdqq.qlogo.cn/headimg_dl?dst_uin=${i.senderUin}&spec=640`})}var M=class{constructor(i){this.messages=i}type="satori";toSatori=async(i,n)=>(await Promise.all(this.messages.map(v(i,n)))).filter(Boolean).flat().filter(Boolean)},q=class{constructor(i){this.messages=i}type="satori";toSatori=async(i,n)=>(await Promise.all(this.messages.map(v(i,n)))).filter(Boolean).flat().filter(Boolean).map(t=>(t.type="message-deleted",t))},w=class{constructor(i,n){this.notify=i;this.uin=n}type="satori";toSatori=async(i,n)=>[{id:void 0,type:"guild-request",platform:i.chronocat.platform,self_id:void 0,timestamp:new Date().getTime(),guild:{id:this.notify.group.groupCode,name:this.notify.group.groupName,avatar:`https://p.qlogo.cn/gh/${this.notify.group.groupCode}/${this.notify.group.groupCode}/640`},user:{id:`${this.uin}`,name:this.notify.user2.nickName,avatar:`http://thirdqq.qlogo.cn/headimg_dl?dst_uin=${this.uin}&spec=640`},member:{},message:{id:`${this.notify.seq}:${this.notify.group.groupCode}`,content:this.notify.postscript}}]},R=class{constructor(i,n,t){this.notify=i;this.uin=n;this.doubt=t}type="satori";toSatori=async(i,n)=>[{id:void 0,type:"guild-member-request",platform:i.chronocat.platform,self_id:void 0,timestamp:new Date().getTime(),guild:{id:this.notify.group.groupCode,name:this.notify.group.groupName,avatar:`https://p.qlogo.cn/gh/${this.notify.group.groupCode}/${this.notify.group.groupCode}/640`},user:{id:`${this.uin}`,name:this.notify.user2.nickName,avatar:`http://thirdqq.qlogo.cn/headimg_dl?dst_uin=${this.uin}&spec=640`},member:{},message:{id:`${this.notify.seq}:${this.notify.group.groupCode}:${this.doubt?"1":"2"}`,content:this.notify.postscript}}]},L=class{constructor(i,n){this.notify=i;this.uin=n}type="satori";toSatori=async(i,n)=>[{id:void 0,type:"guild-member-removed",platform:i.chronocat.platform,self_id:void 0,timestamp:new Date().getTime(),guild:{id:this.notify.group.groupCode,name:this.notify.group.groupName,avatar:`https://p.qlogo.cn/gh/${this.notify.group.groupCode}/${this.notify.group.groupCode}/640`},user:{id:`${this.uin}`,name:this.notify.user2.nickName,avatar:`http://thirdqq.qlogo.cn/headimg_dl?dst_uin=${this.uin}&spec=640`},member:{},message:{id:"",content:this.notify.postscript}}]},N=class{constructor(i,n){this.buddyReq=i;this.uin=n}type="satori";toSatori=async(i,n)=>{let t={id:void 0,type:"friend-request",platform:i.chronocat.platform,self_id:void 0,timestamp:Number(this.buddyReq.reqTime)*1e3};return t.user={id:`${this.uin}`,name:this.buddyReq.friendNick,avatar:`http://thirdqq.qlogo.cn/headimg_dl?dst_uin=${this.uin}&spec=640`},[t]}};var F=e=>i=>{switch(i.type){case"event":{if(!i.args[1]||!Array.isArray(i.args[1]))return;let n=i.args[1];if(!n.length)return;let t=n[0];if(!t||!("cmdName"in t))return;K(e,i.channel,t.cmdName,t.payload);return}case"wrapped-request":{S[i.id]=i.args[1][0];return}case"wrapped-response":{let n=S[i.id];if(!n)return;delete S[i.id],K(e,i.channel,n,i.args[1]);return}}},K=async(e,i,n,t)=>{switch(n){case"nodeIKernelMsgListener/onRecvActiveMsg":case"nodeIKernelMsgListener/onRecvMsg":{if(i!=="IPC_DOWN_2")return;let{msgList:r}=t;for(let o of r)e.chronocat.uix.add(o.senderUid,o.senderUin),o.chatType===p.Private&&e.chronocat.uix.add(o.peerUid,o.peerUin);let a=await Promise.all(r.filter(W).map(async o=>o));a.length&&e.chronocat.emit(new M(a));return}case"nodeIKernelMsgService/getAioFirstViewLatestMsgsAndAddActiveChat":{let{msgList:r}=t;for(let a of r)e.chronocat.uix.add(a.senderUid,a.senderUin),a.chatType===p.Private&&e.chronocat.uix.add(a.peerUid,a.peerUin);return}case"nodeIKernelProfileListener/onProfileSimpleChanged":case"nodeIKernelProfileListener/onProfileDetailInfoChanged":case"nodeIKernelGroupListener/onSearchMemberChange":case"nodeIKernelGroupService/getNextMemberList":{let{profiles:r,infos:a,info:o}=t;o&&e.chronocat.uix.add(o.uid,o.uin);let s=r??a;if(s)for(let[d,{uin:u}]of s)e.chronocat.uix.add(d,u);return}case"onProfileSimpleChanged":{let{profiles:r}=t;if(r)for(let a in r)e.chronocat.uix.add(a,r[a].uin);return}case"nodeIKernelGroupListener/onMemberInfoChange":{let{members:r}=t;for(let[a,{uin:o}]of r)e.chronocat.uix.add(a,o);return}case"nodeIKernelGroupListener/onMemberListChange":{let{info:r}=t;if(!r.sceneId.split("_")[0])return;for(let[o,{uin:s}]of r.infos)e.chronocat.uix.add(o,s);return}case"nodeIKernelRecentContactListener/onRecentContactListChangedVer2":{let{changedRecentContactLists:r}=t;for(let a of r)for(let o of a.changedList)e.chronocat.uix.add(o.senderUid,o.senderUin),o.chatType===p.Private&&e.chronocat.uix.add(o.peerUid,o.peerUin);return}case"onOpenParamChange":{let{data:r}=t;for(let a of r)e.chronocat.uix.add(a.senderUid,a.senderUin),a.chatType===p.Private&&e.chronocat.uix.add(a.peerUid,a.peerUin);return}case"nodeIKernelMsgService/getMsgsIncludeSelf":{let{msgList:r}=t;for(let a of r)e.chronocat.uix.add(a.senderUid,a.senderUin),a.chatType===p.Private&&e.chronocat.uix.add(a.peerUid,a.peerUin);return}case"onGroupListUpdate":case"nodeIKernelGroupListener/onGroupListUpdate":{let{groupList:r}=t;for(let a of r)T[a.groupCode]=a;return}case"nodeIKernelGroupListener/onGroupSingleScreenNotifies":{let{doubt:r,notifies:a}=t;a.forEach(async o=>{switch(o.type){case 1:{if(o.status!==1)return;let s=await e.chronocat.uix.getUin2(o.user2.uid);if(!s){e.chronocat.l.error("\u5185\u90E8\u9519\u8BEF",{code:2152});return}let d=`${o.group.groupCode}:${s}:${o.seq}`;if(O.includes(d))return;O.push(d),e.chronocat.emit(new w(o,s));return}case 7:{if(o.status!==1)return;let s=await e.chronocat.uix.getUin2(o.user1.uid);if(!s){e.chronocat.l.error("\u5185\u90E8\u9519\u8BEF",{code:2152});return}let d=`${o.group.groupCode}:${s}:${o.seq}`;if(G.includes(d))return;G.push(d),e.chronocat.emit(new R(o,s,r));return}case 11:{let s=await e.chronocat.uix.getUin2(o.user1.uid);if(!s){e.chronocat.l.error("\u5185\u90E8\u9519\u8BEF",{code:2152});return}let d=`${o.group.groupCode}:${s}:${o.seq}`;if(_.includes(d))return;_.push(d),e.chronocat.emit(new L(o,s));return}}});return}case"onBuddyListChange":case"nodeIKernelBuddyListener/onBuddyListChange":{let{data:r,buddyCategory:a,userSimpleInfos:o}=t;if(r)for(let s of r)for(let d of s.buddyList)e.chronocat.uix.add(d.uid,d.uin);else if(a&&o)for(let s in o)e.chronocat.uix.add(s,o[s].uin);return}case"nodeIKernelBuddyListener/onBuddyReqChange":{let{buddyReqs:r}=t;r.forEach(async a=>{if(a.reqType!==1||a.reqSubType!==1)return;let o=await e.chronocat.uix.getUin2(a.friendUid);if(!o){e.chronocat.l.error("\u5185\u90E8\u9519\u8BEF",{code:2152});return}let s=`${o}:${a.reqTime}`;$.includes(s)||($.push(s),e.chronocat.emit(new N(a,o)))});return}case"nodeIKernelMsgListener/onAddSendMsg":{let{msgRecord:r}=t;b.push(r.msgId);return}case"nodeIKernelMsgListener/onMsgInfoListUpdate":{let{msgList:r}=t;for(let o of r)e.chronocat.uix.add(o.senderUid,o.senderUin),o.chatType===p.Private&&e.chronocat.uix.add(o.peerUid,o.peerUin);if(i!=="IPC_DOWN_2")return;r.filter(o=>o.sendStatus>1&&b.find(s=>o.msgId===s)).forEach(o=>{b.splice(b.indexOf(o.msgId),1),e.chronocat.emit(new M([o]))});let a=await Promise.all(r.filter(o=>o.msgType===c.System&&o.subMsgType===4&&!o.isOnlineMsg&&Number(o.recallTime)&&o.elements[0].elementType===8&&o.elements[0].grayTipElement?.subElementType===1).filter(W).map(async o=>o));a.length&&e.chronocat.emit(new q(a));return}}},W=e=>"peer"in e?!e.elements.some(i=>i.walletElement||i.arkElement):!(e.msgType===c.Ark||e.msgType===c.Wallet||e.msgType===c.System&&e.subMsgType===17&&e.sendType===l.System&&e.elements[0].elementType===8&&e.elements[0].grayTipElement.subElementType===16&&e.elements[0].grayTipElement.jsonGrayTipElement.busiId==="81");var z="engine-chronocat-event",ce="0.2.19",ue=async e=>{V({handler:F(e),getId:n=>n?.[0]?.callbackId}),e.chronocat.api.register(z)("chronocat.internal.red.message.parse",(n,t)=>v(e,t)(n)),await e.chronocat.whenReady()};0&&(module.exports={apply,name,version});
